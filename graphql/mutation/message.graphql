mutation CreateMessageAndUpdateTopicHistory(
  $content: String
  $session_id: uuid = ""
  $role: message_role_enum = user
  $attachments: jsonb = null
) {
  insert_message(
    objects: {
      content: $content
      session_id: $session_id
      role: $role
      attachments: $attachments
    }
  ) {
    returning {
      id
    }
  }
  update_topic_history_by_pk(
    pk_columns: { id: $session_id }
    _set: { updated_at: "now()" }
  ) {
    updated_at
  }
}

mutation CreateNewMessage($object: message_insert_input = {}, $session_id: uuid = "" ) {
  insert_message_one(object: $object) {
    id
  }
  
  update_topic_history_by_pk(
    pk_columns: { id: $session_id }
    _set: { updated_at: "now()" }
  ) {
    updated_at
  }
}