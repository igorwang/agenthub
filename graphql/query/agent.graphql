query GetAgentListByType($user_id: uuid) {
  agent_type(
    where: {
      agents: { id: { _is_null: false }, users: { user_id: { _eq: $user_id } } }
    }
  ) {
    id
    name
    agents {
      id
      name
      description
      avatar
    }
  }
}

query GetAgentByID($id: uuid!) {
  agent_by_pk(id: $id) {
    id
    name
    description
    avatar
    default_model
    system_prompt {
      id
      name
      templates {
        id
        order
        role
        template
      }
    }
  }
}

query GetTopicHistories($agent_id: uuid!, $user_id: uuid!, $limit: Int = 100) {
  topic_history(
    where: { agent_id: { _eq: $agent_id }, user_id: { _eq: $user_id } }
    order_by: { updated_at: desc_nulls_last }
    limit: $limit
  ) {
    id
    title
    updated_at
    user_id
    created_at
    agent_id
  }
}
